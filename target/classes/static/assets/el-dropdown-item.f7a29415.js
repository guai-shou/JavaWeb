var ye=Object.defineProperty,he=Object.defineProperties;var Te=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable;var le=(e,o,t)=>o in e?ye(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,P=(e,o)=>{for(var t in o||(o={}))$e.call(o,t)&&le(e,t,o[t]);if(te)for(var t of te(o))Fe.call(o,t)&&le(e,t,o[t]);return e},H=(e,o)=>he(e,Te(o));import{o as Oe,a as Ne,c as N,u as ke,b as Re,d as Se,E as ae,e as De,f as Pe,g as Ke,h as Me,i as ie,w as re,F as Be}from"./el-popper.4015840f.js";import{b as q,d as R,h as I,p as Le,E as ue,k as Ae}from"./index2.3dd85f37.js";import{_ as K,u as Z,w as Ge,a as ce}from"./plugin-vue_export-helper.8ab27d33.js";import{q as k,r as h,p as z,A as $,o as de,u as _,a as pe,d as B,c as D,W as ze,I as U,w as Ye,K as y,b as S,g as Y,h as E,l as O,a9 as Ue,aa as Je,n as Ve,D as me,e as W,ab as He,f as fe,j,S as J,m as X,N as je,F as We,t as qe}from"./index.1ab5ed35.js";const Qe={inheritAttrs:!1};function Xe(e,o,t,l,i,u){return k(e.$slots,"default")}var Ze=K(Qe,[["render",Xe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const xe={name:"ElCollectionItem",inheritAttrs:!1};function eo(e,o,t,l,i,u){return k(e.$slots,"default")}var oo=K(xe,[["render",eo],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const ve="data-el-collection-item",ge=e=>{const o=`El${e}Collection`,t=`${o}Item`,l=Symbol(o),i=Symbol(t),u=H(P({},Ze),{name:o,setup(){const s=h(null),v=new Map;z(l,{itemMap:v,getItems:()=>{const g=_(s);if(!g)return[];const c=Array.from(g.querySelectorAll(`[${ve}]`));return[...v.values()].sort((n,p)=>c.indexOf(n.ref)-c.indexOf(p.ref))},collectionRef:s})}}),r=H(P({},oo),{name:t,setup(s,{attrs:v}){const d=h(null),g=$(l,void 0);z(i,{collectionItemRef:d}),de(()=>{const c=_(d);c&&g.itemMap.set(c,P({ref:c},v))}),pe(()=>{const c=_(d);g.itemMap.delete(c)})}});return{COLLECTION_INJECTION_KEY:l,COLLECTION_ITEM_INJECTION_KEY:i,ElCollection:u,ElCollectionItem:r}},no=q({style:{type:R([String,Array,Object])},currentTabId:{type:R(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:R(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:to,ElCollectionItem:lo,COLLECTION_INJECTION_KEY:x,COLLECTION_ITEM_INJECTION_KEY:ro}=ge("RovingFocusGroup"),ee=Symbol("elRovingFocusGroup"),we=Symbol("elRovingFocusGroupItem"),so={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},ao=(e,o)=>{if(o!=="rtl")return e;switch(e){case I.right:return I.left;case I.left:return I.right;default:return e}},io=(e,o,t)=>{const l=ao(e.key,t);if(!(o==="vertical"&&[I.left,I.right].includes(l))&&!(o==="horizontal"&&[I.up,I.down].includes(l)))return so[l]},uo=(e,o)=>e.map((t,l)=>e[(l+o)%e.length]),oe=e=>{const{activeElement:o}=document;for(const t of e)if(t===o||(t.focus(),o!==document.activeElement))return},se="currentTabIdChange",Q="rovingFocusGroup.entryFocus",co={bubbles:!1,cancelable:!0},po=B({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:no,emits:[se,"entryFocus"],setup(e,{emit:o}){var t;const l=h((t=e.currentTabId||e.defaultCurrentTabId)!=null?t:null),i=h(!1),u=h(!1),r=h(null),{getItems:s}=$(x,void 0),v=D(()=>[{outline:"none"},e.style]),d=a=>{o(se,a)},g=()=>{i.value=!0},c=N(a=>{var w;(w=e.onMousedown)==null||w.call(e,a)},()=>{u.value=!0}),b=N(a=>{var w;(w=e.onFocus)==null||w.call(e,a)},a=>{const w=!_(u),{target:M,currentTarget:F}=a;if(M===F&&w&&!_(i)){const L=new Event(Q,co);if(F==null||F.dispatchEvent(L),!L.defaultPrevented){const m=s().filter(T=>T.focusable),C=m.find(T=>T.active),A=m.find(T=>T.id===_(l)),f=[C,A,...m].filter(Boolean).map(T=>T.ref);oe(f)}}u.value=!1}),n=N(a=>{var w;(w=e.onBlur)==null||w.call(e,a)},()=>{i.value=!1}),p=(...a)=>{o("entryFocus",...a)};z(ee,{currentTabbedId:ze(l),loop:U(e,"loop"),tabIndex:D(()=>_(i)?-1:0),rovingFocusGroupRef:r,rovingFocusGroupRootStyle:v,orientation:U(e,"orientation"),dir:U(e,"dir"),onItemFocus:d,onItemShiftTab:g,onBlur:n,onFocus:b,onMousedown:c}),Ye(()=>e.currentTabId,a=>{l.value=a!=null?a:null}),de(()=>{const a=_(r);Oe(a,Q,p)}),pe(()=>{const a=_(r);Ne(a,Q,p)})}});function mo(e,o,t,l,i,u){return k(e.$slots,"default")}var fo=K(po,[["render",mo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const vo=B({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:to,ElRovingFocusGroupImpl:fo}});function go(e,o,t,l,i,u){const r=y("el-roving-focus-group-impl"),s=y("el-focus-group-collection");return S(),Y(s,null,{default:E(()=>[O(r,Ue(Je(e.$attrs)),{default:E(()=>[k(e.$slots,"default")]),_:3},16)]),_:3})}var wo=K(vo,[["render",go],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Io=B({components:{ElRovingFocusCollectionItem:lo},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:t,loop:l,onItemFocus:i,onItemShiftTab:u}=$(ee,void 0),{getItems:r}=$(x,void 0),s=ke(),v=h(null),d=N(n=>{o("mousedown",n)},n=>{e.focusable?i(_(s)):n.preventDefault()}),g=N(n=>{o("focus",n)},()=>{i(_(s))}),c=N(n=>{o("keydown",n)},n=>{const{key:p,shiftKey:a,target:w,currentTarget:M}=n;if(p===I.tab&&a){u();return}if(w!==M)return;const F=io(n);if(F){n.preventDefault();let m=r().filter(C=>C.focusable).map(C=>C.ref);switch(F){case"last":{m.reverse();break}case"prev":case"next":{F==="prev"&&m.reverse();const C=m.indexOf(M);m=l.value?uo(m,C+1):m.slice(C+1);break}}Ve(()=>{oe(m)})}}),b=D(()=>t.value===_(s));return z(we,{rovingFocusGroupItemRef:v,tabIndex:D(()=>_(b)?0:-1),handleMousedown:d,handleFocus:g,handleKeydown:c}),{id:s,handleKeydown:c,handleFocus:g,handleMousedown:d}}});function bo(e,o,t,l,i,u){const r=y("el-roving-focus-collection-item");return S(),Y(r,{id:e.id,focusable:e.focusable,active:e.active},{default:E(()=>[k(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var Eo=K(Io,[["render",bo],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const _o=q({trigger:Re.trigger,effect:H(P({},Se.effect),{default:"light"}),type:{type:R(String)},placement:{type:R(String),default:"bottom"},popperOptions:{type:R(Object),default:()=>({})},size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:R([Number,String]),default:0},maxHeight:{type:R([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},buttonProps:{type:R(Object)}}),Ie=q({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Le}}),Co=q({onKeydown:{type:R(Function)}}),yo=[I.down,I.pageDown,I.home],be=[I.up,I.pageUp,I.end],ho=[...yo,...be],{ElCollection:To,ElCollectionItem:$o,COLLECTION_INJECTION_KEY:Fo,COLLECTION_ITEM_INJECTION_KEY:Oo}=ge("Dropdown"),ne=Symbol("elDropdown"),{ButtonGroup:No}=ae,ko=B({name:"ElDropdown",components:{ElButton:ae,ElButtonGroup:No,ElScrollbar:De,ElDropdownCollection:To,ElTooltip:Pe,ElRovingFocusGroup:wo,ElIcon:ue,ArrowDown:Ke},props:_o,emits:["visible-change","click","command"],setup(e,{emit:o}){const t=me(),l=Z("dropdown"),i=h(),u=h(),r=h(null),s=h(null),v=h(null),d=h(null),g=h(!1),c=D(()=>({maxHeight:Ae(e.maxHeight)})),b=D(()=>[l.m(w.value)]);function n(){p()}function p(){var f;(f=r.value)==null||f.onClose()}function a(){var f;(f=r.value)==null||f.onOpen()}const w=Me();function M(...f){o("command",...f)}function F(){}function L(){const f=_(s);f==null||f.focus(),d.value=null}function m(f){d.value=f}function C(f){g.value||(f.preventDefault(),f.stopImmediatePropagation())}return z(ne,{contentRef:s,isUsingKeyboard:g,onItemEnter:F,onItemLeave:L}),z("elDropdown",{instance:t,dropdownSize:w,handleClick:n,commandHandler:M,trigger:U(e,"trigger"),hideOnClick:U(e,"hideOnClick")}),{ns:l,scrollbar:v,wrapStyle:c,dropdownTriggerKls:b,dropdownSize:w,currentTabId:d,handleCurrentTabIdChange:m,handlerMainButtonClick:f=>{o("click",f)},handleEntryFocus:C,handleClose:p,handleOpen:a,onFocusAfterTrapped:f=>{var T,G;f.preventDefault(),(G=(T=s.value)==null?void 0:T.focus)==null||G.call(T,{preventScroll:!0})},popperRef:r,triggeringElementRef:i,referenceElementRef:u}}});function Ro(e,o,t,l,i,u){var r;const s=y("el-dropdown-collection"),v=y("el-roving-focus-group"),d=y("el-scrollbar"),g=y("el-tooltip"),c=y("el-button"),b=y("arrow-down"),n=y("el-icon"),p=y("el-button-group");return S(),W("div",{class:j([e.ns.b(),e.ns.is("disabled",e.disabled)])},[O(g,{ref:"popperRef",effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(r=e.referenceElementRef)==null?void 0:r.$el,trigger:e.trigger,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:"",pure:"",persistent:"",onShow:o[0]||(o[0]=a=>e.$emit("visible-change",!0)),onHide:o[1]||(o[1]=a=>e.$emit("visible-change",!1))},He({content:E(()=>[O(d,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:E(()=>[O(v,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:E(()=>[O(s,null,{default:E(()=>[k(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:E(()=>[fe("div",{class:j(e.dropdownTriggerKls)},[k(e.$slots,"default")],2)])}]),1032,["effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","show-after","virtual-ref","virtual-triggering","disabled","transition"]),e.splitButton?(S(),Y(p,{key:0},{default:E(()=>[O(c,J({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,onClick:e.handlerMainButtonClick}),{default:E(()=>[k(e.$slots,"default")]),_:3},16,["size","type","disabled","onClick"]),O(c,J({ref:"triggeringElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled}),{default:E(()=>[O(n,{class:j(e.ns.e("icon"))},{default:E(()=>[O(b)]),_:1},8,["class"])]),_:1},16,["size","type","class","disabled"])]),_:3})):X("v-if",!0)],2)}var So=K(ko,[["render",Ro],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Do=B({name:"DropdownItemImpl",components:{ElIcon:ue},props:Ie,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const t=Z("dropdown"),{collectionItemRef:l}=$(Oo,void 0),{collectionItemRef:i}=$(ro,void 0),{rovingFocusGroupItemRef:u,tabIndex:r,handleFocus:s,handleKeydown:v,handleMousedown:d}=$(we,void 0),g=ie(l,i,u),c=N(b=>{const{code:n}=b;if(n===I.enter||n===I.space)return b.preventDefault(),b.stopImmediatePropagation(),o("clickimpl",b),!0},v);return{ns:t,itemRef:g,dataset:{[ve]:""},tabIndex:r,handleFocus:s,handleKeydown:c,handleMousedown:d}}}),Po=["aria-disabled","tabindex"];function Ko(e,o,t,l,i,u){const r=y("el-icon");return S(),W(We,null,[e.divided?(S(),W("li",J({key:0,class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):X("v-if",!0),fe("li",J({ref:e.itemRef},P(P({},e.dataset),e.$attrs),{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:"menuitem",onClick:o[0]||(o[0]=s=>e.$emit("clickimpl",s)),onFocus:o[1]||(o[1]=(...s)=>e.handleFocus&&e.handleFocus(...s)),onKeydown:o[2]||(o[2]=(...s)=>e.handleKeydown&&e.handleKeydown(...s)),onMousedown:o[3]||(o[3]=(...s)=>e.handleMousedown&&e.handleMousedown(...s)),onPointermove:o[4]||(o[4]=s=>e.$emit("pointermove",s)),onPointerleave:o[5]||(o[5]=s=>e.$emit("pointerleave",s))}),[e.icon?(S(),Y(r,{key:0},{default:E(()=>[(S(),Y(je(e.icon)))]),_:1})):X("v-if",!0),k(e.$slots,"default")],16,Po)],64)}var Mo=K(Do,[["render",Ko],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const Ee=()=>{const e=$("elDropdown",{}),o=D(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},Bo=B({name:"ElDropdownItem",components:{ElDropdownCollectionItem:$o,ElRovingFocusItem:Eo,ElDropdownItemImpl:Mo},inheritAttrs:!1,props:Ie,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:t}){const{elDropdown:l}=Ee(),i=me(),u=h(null),r=D(()=>{var n,p;return(p=(n=_(u))==null?void 0:n.textContent)!=null?p:""}),{onItemEnter:s,onItemLeave:v}=$(ne,void 0),d=N(n=>(o("pointermove",n),n.defaultPrevented),re(n=>{var p;e.disabled?v(n):(s(n),n.defaultPrevented||(p=n.currentTarget)==null||p.focus())})),g=N(n=>(o("pointerleave",n),n.defaultPrevented),re(n=>{v(n)})),c=N(n=>(o("click",n),n.defaultPrevented),n=>{var p,a,w;if(e.disabled){n.stopImmediatePropagation();return}(p=l==null?void 0:l.hideOnClick)!=null&&p.value&&((a=l.handleClick)==null||a.call(l)),(w=l.commandHandler)==null||w.call(l,e.command,i,n)}),b=D(()=>P(P({},e),t));return{handleClick:c,handlePointerMove:d,handlePointerLeave:g,textContent:r,propsAndAttrs:b}}});function Lo(e,o,t,l,i,u){var r;const s=y("el-dropdown-item-impl"),v=y("el-roving-focus-item"),d=y("el-dropdown-collection-item");return S(),Y(d,{disabled:e.disabled,"text-value":(r=e.textValue)!=null?r:e.textContent},{default:E(()=>[O(v,{focusable:!e.disabled},{default:E(()=>[O(s,J(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:E(()=>[k(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var _e=K(Bo,[["render",Lo],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Ao=B({name:"ElDropdownMenu",props:Co,setup(e){const o=Z("dropdown"),{_elDropdownSize:t}=Ee(),l=t.value,{focusTrapRef:i,onKeydown:u}=$(Be,void 0),{contentRef:r}=$(ne,void 0),{collectionRef:s,getItems:v}=$(Fo,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:g,tabIndex:c,onBlur:b,onFocus:n,onMousedown:p}=$(ee,void 0),{collectionRef:a}=$(x,void 0),w=D(()=>[o.b("menu"),o.bm("menu",l==null?void 0:l.value)]),M=ie(r,s,i,d,a),F=N(m=>{var C;(C=e.onKeydown)==null||C.call(e,m)},m=>{const{currentTarget:C,code:A,target:V}=m;if(C.contains(V),I.tab===A&&m.stopImmediatePropagation(),m.preventDefault(),V!==_(r)||!ho.includes(A))return;const T=v().filter(G=>!G.disabled).map(G=>G.ref);be.includes(A)&&T.reverse(),oe(T)});return{size:l,rovingFocusGroupRootStyle:g,tabIndex:c,dropdownKls:w,dropdownListWrapperRef:M,handleKeydown:m=>{F(m),u(m)},onBlur:b,onFocus:n,onMousedown:p}}});function Go(e,o,t,l,i,u){return S(),W("ul",{ref:e.dropdownListWrapperRef,class:j(e.dropdownKls),style:qe(e.rovingFocusGroupRootStyle),tabindex:-1,role:"menu",onBlur:o[0]||(o[0]=(...r)=>e.onBlur&&e.onBlur(...r)),onFocus:o[1]||(o[1]=(...r)=>e.onFocus&&e.onFocus(...r)),onKeydown:o[2]||(o[2]=(...r)=>e.handleKeydown&&e.handleKeydown(...r)),onMousedown:o[3]||(o[3]=(...r)=>e.onMousedown&&e.onMousedown(...r))},[k(e.$slots,"default")],38)}var Ce=K(Ao,[["render",Go],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Ho=Ge(So,{DropdownItem:_e,DropdownMenu:Ce}),jo=ce(_e),Wo=ce(Ce);export{jo as E,Wo as a,Ho as b};
